<HomeScreen>


    MDLabel:
        text: 'Health Department App'
        font_size: 45
        halign: 'center'
        pos_hint: {'center_x': 0.5, 'center_y': .95}

    MDCard:
        size_hint: None, None
        size: 450, 800
        pos_hint: {'center_x': 0.3, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDBoxLayout:
            orientation: 'vertical'
            pos_hint: {'center_x': 0.5,}
            padding: 25
            spacing: 25

            MDLabel:
                text: 'Enter Credentials for Database'
                font_size: 30
                halign: 'left'

            MDTextField:
                hint_text: 'Authority'
                text: app.host
                font_size: 30
                id: database_host

            MDTextField:
                hint_text: 'Port Number'
                text: app.port
                font_size: 30
                id: database_port

            MDTextField:
                hint_text: 'Username'
                text: app.user
                font_size: 30
                id: database_username

            MDTextField:
                hint_text: 'Password'
                text: app.password
                font_size: 30
                id: database_password

            MDTextField:
                hint_text: 'Database'
                text: app.database_name
                font_size: 30
                id: database_database



    MDCard:
        size_hint: None, None
        size: 450, 800
        pos_hint: {'center_x': 0.7, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDBoxLayout:
            orientation: 'vertical'
            pos_hint: {'center_x': 0.5,}
            padding: 25
            spacing: 25

            MDLabel:
                text: 'Enter Credentials for OpenMRS'
                font_size: 30
                halign: 'left'

            MDTextField:
                hint_text: 'Authority'
                text: app.openmrs_host
                font_size: 30
                id: openmrs_host

            MDTextField:
                hint_text: 'Port Number'
                text: app.openmrs_port
                font_size: 30
                id: openmrs_port

            MDTextField:
                hint_text: 'Username'
                text: app.openmrs_user
                font_size: 30
                id: openmrs_username

            MDTextField:
                hint_text: 'Password'
                text: app.openmrs_password
                font_size: 30
                id: openmrs_password

            Widget:
                size_hint_y: None
                height: 70

    Widget:
        size_hint_y: None
        height: 40

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Login'
                font_size: 30
                on_press:
                    app.login_button()



        Widget:
            size_hint_y: None
            height: 10


<LoadingLogin>

    MDCard:
        size_hint: None, None
        size: 900, 800
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'


        MDBoxLayout:
            orientation: 'vertical'
            padding: 25
            spacing: 25

            MDLabel:
                text: 'Logging in'
                halign: 'center'
                font_size: 45

            MDLabel:
                text: 'Loading records from OpenMRS'
                font_size: 30
                halign: 'center'
                id: current_action_loading_login

            MDBoxLayout:
                orientation: 'horizontal'
                padding: 25
                spacing: 25

                MDSpinner:
                    size_hint: None, None
                    size: dp(26), dp(26)
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    id: loading_spinner
                    active: True

                MDProgressBar:
                    value: 1
                    id: loading_login_progress_bar

                Widget:
                    size_hint_x: None
                    width: 10

<DataPreview>


    MDCard:
        size_hint: None, None
        size: 450, 800
        pos_hint: {'center_x': 0.3, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDLabel:
            text: 'Unmatched Records'
            font_size: 45
            halign: 'center'

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                height: sum(child.height+10 for child in self.children)
                id: scrollview_left



    MDCard:
        size_hint: None, None
        size: 450, 800
        pos_hint: {'center_x': 0.7, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDLabel:
            text: 'Records To Import'
            font_size: 45
            halign: 'center'

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                height: sum(child.height+10 for child in self.children)
                id: scrollview_right



    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Abort'
                font_size: 30
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'home'
                    app.change_screen('DataPreview')

            MDRaisedButton:
                text: 'Import'
                font_size: 30
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'ImportingLoading'
                    app.import_button()

        Widget:
            size_hint_y: None
            height: 10


<ImportingLoading>

    MDCard:
        size_hint: None, None
        size: 900, 800
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'


        MDBoxLayout:
            orientation: 'vertical'
            padding: 25
            spacing: 25

            MDLabel:
                text: 'Importing Screen'
                halign: 'center'
                font_size: 45

            MDLabel:
                text: 'Current Action'
                font_size: 30
                halign: 'center'
                id: current_action_loading_importing

            MDBoxLayout:
                orientation: 'horizontal'
                padding: 25
                spacing: 25

                MDSpinner:
                    size_hint: None, None
                    size: dp(26), dp(26)
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    id: importing_spinner
                    active: True

                MDProgressBar:
                    value: 1
                    id: loading_importing_progress_bar

                Widget:
                    size_hint_x: None
                    width: 10

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Back to Login'
                font_size: 20
                disabled: True
                id: back_to_login_button
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'home'
                    root.ids.back_to_login_button.disabled=True
                    root.ids.view_symptomatic_patients_button.disabled=True
                    root.ids.view_vaccination_rate_button.disabled=True
                    root.ids.view_vaccine_order_summary_button.disabled=True
                    app.change_screen('ImportingScreen')

            MDRaisedButton:
                text: 'View Symptomatic Patients'
                font_size: 20
                disabled: True
                id: view_symptomatic_patients_button
                on_press:
                    app.load_symptomatic_patients_screen()
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'SymptomaticPatients'
                    root.ids.back_to_login_button.disabled=True
                    root.ids.view_symptomatic_patients_button.disabled=True
                    root.ids.view_vaccination_rate_button.disabled=True
                    root.ids.view_vaccine_order_summary_button.disabled=True
                    app.change_screen('ImportingLoading')

            MDRaisedButton:
                text: 'Vaccination Rate'
                font_size: 20
                disabled: True
                id: view_vaccination_rate_button
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccinationRate'
                    root.ids.back_to_login_button.disabled=True
                    root.ids.view_symptomatic_patients_button.disabled=True
                    root.ids.view_vaccination_rate_button.disabled=True
                    root.ids.view_vaccine_order_summary_button.disabled=True
                    app.change_screen('ImportingLoading')

            MDRaisedButton:
                text: 'Vaccine Order Summary'
                font_size: 20
                disabled: True
                id: view_vaccine_order_summary_button
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccineOrderSummary'
                    root.ids.back_to_login_button.disabled=True
                    root.ids.view_symptomatic_patients_button.disabled=True
                    root.ids.view_vaccination_rate_button.disabled=True
                    root.ids.view_vaccine_order_summary_button.disabled=True
                    app.change_screen('ImportingLoading')
                    app.load_order_screen()

        Widget:
            size_hint_y: None
            height: 10

<SymptomaticPatients>
    MDCard:
        size_hint: None, None
        size: 900, 800
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDLabel:
            text: 'Symptomatic Patients'
            font_size: 45
            halign: 'center'

        MDLabel:
            text: 'Patients with a fever'
            font_size: 30
            halign: 'center'

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                height: sum(child.height+10 for child in self.children)
                id: scrollview_symptomatic_patients

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Back to Login'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'home'
                    app.change_screen('SymptomaticPatients')

            MDRaisedButton:
                text: 'Vaccination Rate'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccinationRate'
                    app.change_screen('SymptomaticPatients')


            MDRaisedButton:
                text: 'Vaccine Order Summary'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccineOrderSummary'
                    app.change_screen('SymptomaticPatients')
                    app.load_order_screen()


        Widget:
            size_hint_y: None
            height: 10

<VaccinationRate>
    MDCard:
        size_hint: None, None
        size: 900, 800
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDLabel:
            text: 'Vaccination Rate'
            font_size: 45
            halign: 'center'

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            Spinner:
                text: 'Select a Disease'
                size_hint: None, None
                size: 300, 100
                pos_hint: {'center': 'center'}
                font_size: 30
                id: select_disease_vaccination_rate
                background_color: 0, 1.5, 4, 1
                values: 'Covid', 'Measles', 'Smallpox', 'Anthrax', 'Mumps', 'Polio'
                on_text:
                    app.load_vaccines_for_selected_disease()

            Spinner:
                text: 'Not available'
                size_hint: None, None
                size: 300, 100
                pos_hint: {'center': 'center'}
                font_size: 30
                id: select_vaccine_vaccination_rate
                background_color: 0, 1.5, 4, 1

        MDBoxLayout:
            orientation: 'horizontal'
            padding: 25
            spacing: 25
            pos_hint: {'center_x': 0.5,}

            MDLabel:
                text: 'People vaccinated:'
                font_size: 30
                halign: 'right'

            MDLabel:
                text: 'Prefill'
                font_size: 30
                halign: 'left'
                id: people_vaccinated_label

        MDBoxLayout:
            orientation: 'horizontal'
            padding: 25
            spacing: 25
            pos_hint: {'center_x': 0.5,}

            MDLabel:
                text: 'Not vaccinated for disease:'
                font_size: 30
                halign: 'right'

            MDLabel:
                text: 'Prefill'
                font_size: 30
                halign: 'left'
                id: people_not_vaccinated_label

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Back to Login'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'home'
                    app.change_screen('VaccinationRate')
            MDRaisedButton:
                text: 'View Symptomatic Patients'
                font_size: 20
                on_press:
                    app.load_symptomatic_patients_screen()
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'SymptomaticPatients'
                    app.change_screen('VaccinationRate')


            MDRaisedButton:
                text: 'Vaccine Order Summary'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccineOrderSummary'
                    app.change_screen('VaccinationRate')
                    app.load_order_screen()

        Widget:
            size_hint_y: None
            height: 10

<VaccineOrderSummary>
    MDCard:
        size_hint: None, None
        size: 900, 800
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        elevation: 5
        padding: 25
        spacing: 25
        orientation: 'vertical'

        MDLabel:
            text: 'Vaccine Order Summary'
            font_size: 45
            halign: 'center'

        Spinner:
            text: 'Select a Disease'
            size_hint: None, None
            size: 300, 100
            pos_hint: {'center': 'center'}
            font_size: 30
            id: select_vaccine_vaccine_order_summary
            background_color: 0, 1.5, 4, 1
            pos_hint: {'center_x': 0.5,}
            on_text:
                app.load_orders_placed()

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                height: sum(child.height+10 for child in self.children)
                id: scrollview_vaccine_order_summary

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 25

        MDBoxLayout:
            orientation: 'horizontal'
            spacing: 25
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {'center_x': 0.5,}

            MDRaisedButton:
                text: 'Back to Login'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'home'
                    app.change_screen('VaccineOrderSummary')

            MDRaisedButton:
                text: 'View Symptomatic Patients'
                font_size: 20
                on_press:
                    app.load_symptomatic_patients_screen()
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'SymptomaticPatients'
                    app.change_screen('VaccineOrderSummary')


            MDRaisedButton:
                text: 'Vaccination Rate'
                font_size: 20
                on_release:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'VaccinationRate'
                    app.change_screen('VaccineOrderSummary')

        Widget:
            size_hint_y: None
            height: 10

<NewInputError@Popup>
    title: 'Input Error'
    font_size: sp(30)
    size_hint: (None,None)
    size: (500,200)
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: f'{app.input_error_message}'
            font_size: sp(15)
        Button:
            text: 'Okay'
            font_size: sp(30)
            on_press:
                root.dismiss()






